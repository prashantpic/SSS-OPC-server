{
  "mappingId": "SamplePlatformMapping_v1",
  "description": "Mapping rules for Sample IoT Platform.",
  "rules": [
    {
      "sourcePath": "$.OPCServer1.Boiler.Temperature",
      "targetPath": "$.deviceData.temperature_celsius",
      "dataType": "float",
      "transformation": null,
      "defaultValue": null
    },
    {
      "sourcePath": "$.OPCServer1.Boiler.Pressure",
      "targetPath": "$.deviceData.pressure_bar",
      "dataType": "float",
      "transformation": {
        "type": "multiply",
        "factor": 0.01 
      },
      "defaultValue": 0.0
    },
    {
      "sourcePath": "$.OPCServer1.Conveyor.IsRunning",
      "targetPath": "$.deviceStatus.isRunning",
      "dataType": "boolean",
      "transformation": null,
      "defaultValue": false
    },
    {
      "sourcePath": "$.OPCServer1.Robot.ErrorCode",
      "targetPath": "$.alerts.robot_error_code",
      "dataType": "integer",
      "transformation": null,
      "condition": {
        "sourcePath": "$.OPCServer1.Robot.ErrorCode",
        "operator": "!=",
        "value": 0
      }
    },
    {
      "sourcePath": "$.EventTimestamp",
      "targetPath": "$.timestamp_utc",
      "dataType": "datetime",
      "transformation": {
        "type": "format",
        "formatString": "yyyy-MM-ddTHH:mm:ssZ"
      }
    },
    {
      "sourcePath": "$.DeviceId",
      "targetPath": "$.deviceId",
      "dataType": "string"
    }
  ],
  "globalTransformations": [
    {
      "type": "addMetadata",
      "key": "dataVersion",
      "value": "1.2"
    }
  ]
}