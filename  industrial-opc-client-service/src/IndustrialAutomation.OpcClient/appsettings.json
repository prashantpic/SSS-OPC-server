{
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console"
      },
      {
        "Name": "File",
        "Args": {
          "path": "Logs/opc-client-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 7,
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [
      "FromLogContext",
      "WithMachineName",
      "WithProcessId",
      "WithThreadId"
    ],
    "Properties": {
      "Application": "IndustrialAutomation.OpcClient"
    }
  },
  "OpcClient": {
    "ClientId": "EdgeClient-001",
    "ServerConnections": [
      {
        "Id": "LocalOpcUaServer",
        "Standard": "Ua",
        "EndpointUrl": "opc.tcp://localhost:4840",
        "SecurityPolicy": "http://opcfoundation.org/UA/SecurityPolicy#Basic256Sha256",
        "MessageSecurityMode": "SignAndEncrypt",
        "UseAnonymous": true,
        "UserName": "",
        "Password": "",
        "CertificateThumbprint": "",
        "ClientCertificatePath": "pki/client.pfx",
        "ClientPrivateKeyPath": ""
      },
      {
        "Id": "LocalOpcDaServer",
        "Standard": "Da",
        "EndpointUrl": "OPC.SimaticNET", // ProgID for DA
        "UseAnonymous": true,
        "UserName": "",
        "Password": ""
      }
    ],
    "TagImport": {
      "FilePath": "Config/tags.csv",
      "FileType": "CSV",
      "ServerId": "LocalOpcUaServer", // Default server for tags if not specified in file
      "OverwriteExisting": true
    },
    "Subscriptions": [ // Default settings for UA subscriptions if not specified per subscription
      {
        "Id": "DefaultSubscription",
        "ServerId": "LocalOpcUaServer",
        "PublishingInterval": 1000,
        "LifetimeCount": 300, // Corresponds to 300 * 1000ms = 5 minutes
        "MaxKeepAliveCount": 10, // Corresponds to 10 * 1000ms = 10 seconds
        "MaxNotificationsPerPublish": 1000,
        "PublishingEnabled": true,
        "Priority": 0,
        "Items": [
          {
            "TagId": "SimulatedTemperature", // Internal TagId
            "NodeId": "ns=2;s=SimulatedTemperature",
            "SamplingInterval": 500,
            "QueueSize": 1,
            "DiscardOldest": 1, // True
            "DataChangeTrigger": "StatusValue"
          }
        ]
      }
    ]
  },
  "ServerApp": {
    "CommunicationMethod": "Grpc", // Options: "Grpc", "RabbitMq", "Kafka"
    "GrpcEndpoint": "https://localhost:7001",
    "MessageQueue": {
      "RabbitMq": {
        "ConnectionString": "amqp://guest:guest@localhost:5672/",
        "RealtimeDataTopic": "opc.data.realtime",
        "HistoricalDataTopic": "opc.data.historical",
        "AlarmEventTopic": "opc.data.alarms",
        "CriticalWriteLogTopic": "opc.logs.criticalwrites",
        "AuditEventTopic": "opc.logs.audit",
        "SubscriptionStatusTopic": "opc.status.subscriptions",
        "EdgeAiOutputTopic": "opc.data.aioutput",
        "UseTls": false,
        "CaCertPath": "",
        "ClientCertPath": "",
        "ClientKeyPath": ""
      },
      "Kafka": {
        "BrokerList": "localhost:9092",
        "RealtimeDataTopic": "opc.data.realtime",
        "HistoricalDataTopic": "opc.data.historical",
        "AlarmEventTopic": "opc.data.alarms",
        "CriticalWriteLogTopic": "opc.logs.criticalwrites",
        "AuditEventTopic": "opc.logs.audit",
        "SubscriptionStatusTopic": "opc.status.subscriptions",
        "EdgeAiOutputTopic": "opc.data.aioutput",
        "SecurityProtocol": "PlainText", // SaslSsl, Ssl, PlainText
        "SaslMechanism": "Gssapi", // Gssapi, Plain, ScramSha256, ScramSha512
        "SaslUsername": "",
        "SaslPassword": "",
        "SslCaLocation": "",
        "SslCertificateLocation": "",
        "SslKeyLocation": ""
      }
    }
  },
  "EdgeAI": {
    "ModelPath": "Models/",
    "ActiveModel": {
      "ModelId": "AnomalyDetectionModel",
      "Version": "1.0.0"
    },
    "PredictionIntervalMs": 5000
  },
  "DataHandling": {
    "BufferCapacity": 10000,
    "TransmissionBatchSize": 100,
    "ValidationRules": [
      {
        "TagId": "SimulatedTemperature",
        "RuleType": "Range", // e.g., "Range", "DataType", "Regex"
        "Parameters": {
          "Min": -50.0,
          "Max": 150.0
        }
      },
      {
        "TagId": "WriteableTag1",
        "RuleType": "DataType",
        "Parameters": {
          "ExpectedType": "System.Int32"
        }
      }
    ]
  },
  "WriteLimits": [
    {
      "TagId": "WriteableTag1",
      "PolicyType": "RateLimit", // e.g., "RateLimit", "ValueChangeThreshold"
      "Parameters": {
        "MaxWritesPerMinute": 5
      }
    },
    {
      "TagId": "WriteableTag2",
      "PolicyType": "ValueChangeThreshold",
      "Parameters": {
        "Threshold": 10.0, // Minimum change required
        "RequiresConfirmation": true // If change is below threshold
      }
    }
  ]
}